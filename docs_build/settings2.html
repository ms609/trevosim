<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7. Settings - Environment, events and playing fields &mdash; TREvoSim 3.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=86f27845" />

  
  
        <script src="_static/documentation_options.js?v=acc74ff5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. Logging the Simulation" href="loggingsim.html" />
    <link rel="prev" title="6. Settings - Organisms and simulation" href="settings.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            TREvoSim
              <img src="_static/TREvoSim.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirementsinstallation.html">2. Requirements and Installation from Binaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="buildingfromsource.html">3. Compiling from Source and Development Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithmconcepts.html">4. Algorithm, Concepts, and Experimental Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="windowlayout.html">5. Window Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">6. Settings - Organisms and simulation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. Settings - Environment, events and playing fields</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#environment">7.1. Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#events">7.2. Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="#playing-field-s">7.3. Playing field(s)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="loggingsim.html">8. Logging the Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="filecommands.html">9. Menu commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="software_tests.html">10. Tests</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TREvoSim</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">7. </span>Settings - Environment, events and playing fields</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/settings2.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="settings-environment-events-and-playing-fields">
<span id="settings2"></span><h1><span class="section-number">7. </span>Settings - Environment, events and playing fields<a class="headerlink" href="#settings-environment-events-and-playing-fields" title="Link to this heading">¶</a></h1>
<p>Clicking on the settings button of the toolbar will launch a settings dialogue which has two tabs - one with settings for the organisms in the simulation, and one controlling the environment for the simulation.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="_images/settings_02.png"><img alt="A screenshot of the TREvoSim settings panel for Environment, events and playing fields" src="_images/settings_02.png" style="width: 550px;" /></a>
<figcaption>
<p><span class="caption-text">The TREvoSim Environment, events and playing fields settings panel</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="environment">
<h2><span class="section-number">7.1. </span>Environment<a class="headerlink" href="#environment" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Rate of environmental mutation</dt><dd><p>The environment in TREvoSim - which comprises a series of random numbers, or masks - also mutates, allowing lineages to track fitness peaks. This setting dictates the rate of mutation for the environment, in units of mutations per hundred characters per iteration.</p>
</dd>
<dt>Number of environments</dt><dd><p>From v2.0.0 TREvoSim allows multiple environments (i.e. numerous sets of masks). During a simulation the fitness of each organism is calculated for every environment, and the organism’s overall fitness is defined as that from the environment to which it is best suited (i.e. for which it has maximal fitness). Increasing the environment number can thus be visualised as flattening the fitness landscape, as the number of less fit genomic configurations are reduced, and ‘valleys’ become shallower.</p>
</dd>
<dt>Masks per environment</dt><dd><p>This dictates the number of masks (random numbers) in the environment. Fitness is calculated by summing the differences between the genome and all masks, and thus the more masks there are the flatter the fitness landscape is likely to be. This can be explored using the <a class="reference internal" href="filecommands.html#fitness-histogram"><span class="std std-ref">Fitness histogram</span></a> functionality.</p>
</dd>
<dt>Match peaks</dt><dd><p>When TREvoSim has multiple environments associated with a playing field, enabling this option ensures that at initialisation each environment has the same maximal fitness (i.e. fitness peak height). Note, that this is currently applied within, not across, playing fields, if the latter have different masks. When this setting is enabled, as well as achieving fitness peaks of the same height, TREvoSim will use a heuristic search to seed the simulation with the fittest organism it can that also has the same fitness for all environments (it achieves this in more than 99% of runs; if playing fields have different environments the algorithm will search for organism with the best mean fitness across playing fields). As currently formulated, once a simulation is running, mutations will cause peak fitnesses to diverge between environments (add mask / overwrite mask).</p>
</dd>
<dt>Ecosystem Engineers</dt><dd><p>From v3.0.0 TREvoSim allows organism-environment feedback through an ecosystem engineering functionality. When this option is enabled, ecosystem engineering starts at either half the requested iteration count, or after half the requested species have appeared. The first time EE occurs, a single, randomly-chosen individual is assigned “EE status” (as are any other individuals with identical genomes), and its genome is used as the basis for organism-environment feedback, as outlined below.This status is passed on to all offspring of this individual for the remainder of the run.</p>
</dd>
<dt>EE mode</dt><dd><p>EE can either be applied once or persistently, defined by this pair of radio buttons. In single shot EE, engineers are applied once, half way through a simulation, as outlined above. In contrast, if the persistent EE radio button is selected, then EE is applied repeatedly after its first application. The frequency at which this occurs is user-defined (see below). On reapplication, a random individual is chosen from within those individuals with EE status every reapplication as the basis for organism-environment feedback. If EEs have gone extinct, no action is taken.</p>
</dd>
<dt>EE Frequency</dt><dd><p>This is the frequency, in iterations, with which persistent EEs are applied. Application of EEs, when persistent EE is checked (above), occurs repeatedly after the first EE application which is triggered halfway through a run.</p>
</dd>
<dt>EE mechanism</dt><dd><p>EE-based organism-environment feedback can occur in two ways in TREvoSim. If EE overwrites mask is selected here, then the genome of the selected individual is used to overwrite the last mask of every environment on every playing field (i.e. TREvoSim selects a single individual from across all playing fields with EE status, and then uses this to modify the environment across all playing fields, even those in which the organism does not reside). In contrast, if EE adds mask is selected, on the first application of EE only, a new mask is added to all environments across all playing fields, which matches the genome of the selected engineer (this modifies the adaptive landscape in different ways to overwriting a mask). All subsequent applications of EE, if they are persistent, revert to overwriting the mask that was added at first application.</p>
</dd>
</dl>
</section>
<section id="events">
<h2><span class="section-number">7.2. </span>Events<a class="headerlink" href="#events" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Apply perturbation during run</dt><dd><p>TREvoSim offers the option of applying an environmental perturbation during a run. When this is selected, at halfway through a run (after the speciation of the n/2 the requested species, or at half the requested iteration count), all masks for all environments are overwritten with new, random, masks. If playing field masks are independent this results in new random masks for all environments on all playing fields. If masks are set to be identical across playing fields, then new masks are written to all environments, but these are identical across the playing fields. This perturbation then lasts for 10% of the iteration number at which it began, during which the masks gradually return to their pre-perturbation state (specifically, over the course of the perturbation period, 90% of bits across all masks and environments are copied back over the new masks from a copy created at perturbation initiation). As currently coded, during this period, only mutations occurring to the new, perturbation, rather than the previous environment will be applied, and overall the environmental change due to mutation will be lower than the remainder of the run (although rate of change will likely be higher as the perturbation environment is reverting to the pre-perturbation one).</p>
</dd>
<dt>Increase mixing for perturbation period</dt><dd><p>When mixing is enabled between playing fields, this can be accelerated during a perturbation. When this option is selected, mixing between playing fields increases when a perturbation is occurring, then returns to background rates once it is complete. Note: At present mixing is defined as a percentage probability (see below), which is multiplied by ten during the increased mixing phase. As such, for any value of mixing greater than ten, increasing mixing will result in mixing occurring once per iteration (i.e. with a 100% probability). This is likely to change in future releases to, e.g. a doubling of the rate or similar: if you are considering using this feature please contact the developers.</p>
</dd>
</dl>
</section>
<section id="playing-field-s">
<h2><span class="section-number">7.3. </span>Playing field(s)<a class="headerlink" href="#playing-field-s" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Playing field size</dt><dd><p>This dictates the size of the playing field within the simulation, i.e. the number of individuals alive at any given time. Small sizes will lend themselves to asymmetrical trees with short tips.</p>
</dd>
<dt>Expanding playing field</dt><dd><p>When this option is enabled, each species only has a single entry in the playing field. This is overwritten by an individual’s progeny every time that species is selected for duplication, and at speciation a new species is added to the end of the playing field (which thus expands to accommodate new species - hence the name). This removes intraspecific competition.</p>
</dd>
<dt>Random overwrite</dt><dd><p>When this is checked, when a new organism is returned to the playing field (see Keating et al. 2020 for algorithm details), it will overwrite an individual at random. When it is not checked it overwrites the organism with the lowest fitness (or one of these at random if multiple individuals share the lowest fitness).</p>
</dd>
<dt>Selection coin toss</dt><dd><p>This dictates the probability of choosing any given individual when moving down the playing field in the coin toss (i.e. the geometric distribution) to select an individual to duplicate. The probability of selecting an individual is the reciprocal of this (i.e. 1 /  this number). If, e.g., this is 2.0 there is a 50% chance of selecting the first organism in the playing field, then 50% selecting the next, and so on.</p>
</dd>
<dt>Number of playing fields</dt><dd><p>From v2.0.0 TREvoSim allows multiple playing fields. These are initialised with the same individual, and then operate independently (each playing field will thus form a clade). When playing fields have different masks, a heuristic search is used to initialise the simulation with an organism that has the best mean fitness across all playing fields.</p>
</dd>
<dt>Playing field mixing</dt><dd><p>When there is more than one playing field, it is possible from v3 of TREvoSim to allow mixing between playing fields. When this option is selected, mixing occurs through the overwriting of a random individual in one playing field with a copy of a random organism from another. The chance of mixing - defined below, per iteration - applies to a playing field as a whole. When there are more than two playing fields, each playing field has an equal probability of mixing occurring (defined by the Probability of playing field mixing - PF2 to PF1 option below). When it does, a random individual from the chosen playing field is used to overwrite a random individual in one of the other playing fields (also randomly chosen). When there are two playing fields, it is possible to have asymmetrical mixing rates, using both the below options, and otherwise mixing occurs in the same way.</p>
</dd>
<dt>Percentage chance of playing field mixing – PF2 to PF1</dt><dd><p>If a random number bounded to 100 is smaller than this value, then mixing will occur any given iteration. As such, as value of 10 here equates to a 10% chance of mixing occurring every iteration. When there are more than two playing fields, this value defines the probability of mixing for all playing fields per iteration (the label updates to reflect this when this is the case). When there are just two, it defines the probability of mixing from playing field 2 to playing field 1.</p>
</dd>
<dt>Percentage chance of playing field mixing – PF1 to PF2</dt><dd><p>As above, but when there are two playing fields, this defines the probability of mixing from playing field 1 to playing field 2. When there are more than two masks, this is not used.</p>
</dd>
<dt>Playing field masks</dt><dd><p>The options here define the behaviour of masks across playing fields. They can be identical, be independent, or start identical and then evolve away from each other. If independent, the playing fields are initialised with the individual that has the highest mean fitness across all playing fields after 5000 initialisations (with a single playing field the initialising organism is within the top 10% of possible fitnesses for the starting masks).</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="settings.html" class="btn btn-neutral float-left" title="6. Settings - Organisms and simulation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="loggingsim.html" class="btn btn-neutral float-right" title="8. Logging the Simulation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright (TREvoSim documentation) 2024, Russell J. Garwood, Alan R.T. Spencer.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>